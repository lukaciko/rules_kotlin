load("@rules_kotlin//kotlin:core.bzl", "kt_ksp_plugin")
load("@rules_kotlin//kotlin:jvm.bzl", "kt_jvm_library")

kt_ksp_plugin(
    name = "dagger_component_plugin",
    processor_class = "dagger.internal.codegen.KspComponentProcessor",
    visibility = ["//visibility:public"],
    deps = [
        "@maven//:com_google_dagger_dagger_compiler",
    ],
)

java_plugin(
    name = "dagger_component_plugin_kapt",
    generates_api = True,
    processor_class = "dagger.internal.codegen.ComponentProcessor",
    visibility = ["//visibility:public"],
    deps = [
        "@maven//:com_google_dagger_dagger_compiler",
    ],
)

# do we need to declare dagger.spi.shaded.androidx.room.compiler.processing.ksp.KspBasicAnnotationProcessor ?
# probably not, it's just a parent class

kt_jvm_library(
    name = "dagger",
    # plugins = ["dagger_component_plugin_kapt"],
    visibility = ["//visibility:public"],
    exports = [
        "@maven//:com_google_dagger_dagger",
        "@maven//:com_google_guava_guava",
        "@maven//:javax_inject_javax_inject",
    ],
)
